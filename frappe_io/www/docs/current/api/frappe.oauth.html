<!-- title: frappe.oauth -->
<!-- add-breadcrumbs --><h1>frappe.oauth</h1>
<div class="dev-header">

<a class="btn btn-default btn-sm" disabled style="margin-bottom: 10px;">
	Version 10.0.10</a>


	<a class="btn btn-default btn-sm" href="https://github.com/frappe/frappe/blob/develop/frappe/oauth.py"
		target="_blank" style="margin-left: 10px; margin-bottom: 10px;"><i class="octicon octicon-mark-github"></i> Source</a>

</div>





	
        
	<h3 style="font-weight: normal;">Class <b>OAuthWebRequestValidator</b></h3>
    
    <p style="padding-left: 30px;"><i>Inherits from oauthlib.oauth2.rfc6749.request_validator.RequestValidator</i></h4>
    
    <div class="docs-attr-desc"><p></p>
</div>
    <div style="padding-left: 30px;">
        
        
    
    
	<p class="docs-attr-name">
        <a name="authenticate_client" href="#authenticate_client" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>authenticate_client</b>
        <i class="text-muted">(self, request)</i>
    </p>
	<div class="docs-attr-desc"><p><span class="text-muted">No docs</span></p>
</div>
	<br>

        
        
    
    
	<p class="docs-attr-name">
        <a name="authenticate_client_id" href="#authenticate_client_id" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>authenticate_client_id</b>
        <i class="text-muted">(self, client_id, request)</i>
    </p>
	<div class="docs-attr-desc"><p><span class="text-muted">No docs</span></p>
</div>
	<br>

        
        
    
    
	<p class="docs-attr-name">
        <a name="confirm_redirect_uri" href="#confirm_redirect_uri" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>confirm_redirect_uri</b>
        <i class="text-muted">(self, client_id, code, redirect_uri, client)</i>
    </p>
	<div class="docs-attr-desc"><p><span class="text-muted">No docs</span></p>
</div>
	<br>

        
        
    
    
	<p class="docs-attr-name">
        <a name="get_default_redirect_uri" href="#get_default_redirect_uri" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>get_default_redirect_uri</b>
        <i class="text-muted">(self, client_id, request)</i>
    </p>
	<div class="docs-attr-desc"><p><span class="text-muted">No docs</span></p>
</div>
	<br>

        
        
    
    
	<p class="docs-attr-name">
        <a name="get_default_scopes" href="#get_default_scopes" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>get_default_scopes</b>
        <i class="text-muted">(self, client_id, request)</i>
    </p>
	<div class="docs-attr-desc"><p><span class="text-muted">No docs</span></p>
</div>
	<br>

        
        
    
    
	<p class="docs-attr-name">
        <a name="get_id_token" href="#get_id_token" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>get_id_token</b>
        <i class="text-muted">(self, token, token_handler, request)</i>
    </p>
	<div class="docs-attr-desc"><pre><code>    In the OpenID Connect workflows when an ID Token is requested this method is called.
    Subclasses should implement the construction, signing and optional encryption of the
    ID Token as described in the OpenID Connect spec.

    In addition to the standard OAuth2 request properties, the request may also contain
    these OIDC specific properties which are useful to this method:

        - nonce, if workflow is implicit or hybrid and it was provided
        - claims, if provided to the original Authorization Code request

    The token parameter is a dict which may contain an ``access_token`` entry, in which
    case the resulting ID Token *should* include a calculated ``at_hash`` claim.

    Similarly, when the request parameter has a ``code`` property defined, the ID Token
    *should* include a calculated ``c_hash`` claim.

    <a href="http://openid.net/specs/openid-connect-core-1_0.html">http://openid.net/specs/openid-connect-core-1_0.html</a> (sections `3.1.3.6`_, `3.2.2.10`_, `3.3.2.11`_)

    .. _`3.1.3.6`: <a href="http://openid.net/specs/openid-connect-core-1_0.html#CodeIDToken">http://openid.net/specs/openid-connect-core-1_0.html#CodeIDToken</a>
    .. _`3.2.2.10`: <a href="http://openid.net/specs/openid-connect-core-1_0.html#ImplicitIDToken">http://openid.net/specs/openid-connect-core-1_0.html#ImplicitIDToken</a>
    .. _`3.3.2.11`: <a href="http://openid.net/specs/openid-connect-core-1_0.html#HybridIDToken">http://openid.net/specs/openid-connect-core-1_0.html#HybridIDToken</a>
</code></pre>

<p><strong>Parameters:</strong></p>

<ul>
<li><strong><code>token</code></strong> -  A Bearer token dict</li>
<li><strong><code>token_handler</code></strong> -  the token handler (BearerToken class)</li>
<li><p><strong><code>request</code></strong> -  the HTTP Request (oauthlib.common.Request)</p>

<pre><code>:return: The ID Token (a JWS signed JWT)
</code></pre></li>
</ul>
</div>
	<br>

        
        
    
    
	<p class="docs-attr-name">
        <a name="get_original_scopes" href="#get_original_scopes" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>get_original_scopes</b>
        <i class="text-muted">(self, refresh_token, request)</i>
    </p>
	<div class="docs-attr-desc"><p><span class="text-muted">No docs</span></p>
</div>
	<br>

        
        
    
    
	<p class="docs-attr-name">
        <a name="invalidate_authorization_code" href="#invalidate_authorization_code" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>invalidate_authorization_code</b>
        <i class="text-muted">(self, client_id, code, request)</i>
    </p>
	<div class="docs-attr-desc"><p><span class="text-muted">No docs</span></p>
</div>
	<br>

        
        
    
    
	<p class="docs-attr-name">
        <a name="revoke_token" href="#revoke_token" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>revoke_token</b>
        <i class="text-muted">(self, token, token_type_hint, request)</i>
    </p>
	<div class="docs-attr-desc"><p>Revoke an access or refresh token.</p>

<p><strong>Parameters:</strong></p>

<ul>
<li><strong><code>token</code></strong> -  The token string.</li>
<li><strong><code>token_type_hint</code></strong> -  access<em>token or refresh</em>token.</li>
<li><p><strong><code>request</code></strong> -  The HTTP Request (oauthlib.common.Request)</p>

<pre><code>Method is used by:
    - Revocation Endpoint
</code></pre></li>
</ul>
</div>
	<br>

        
        
    
    
	<p class="docs-attr-name">
        <a name="save_authorization_code" href="#save_authorization_code" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>save_authorization_code</b>
        <i class="text-muted">(self, client_id, code, request)</i>
    </p>
	<div class="docs-attr-desc"><p><span class="text-muted">No docs</span></p>
</div>
	<br>

        
        
    
    
	<p class="docs-attr-name">
        <a name="save_bearer_token" href="#save_bearer_token" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>save_bearer_token</b>
        <i class="text-muted">(self, token, request)</i>
    </p>
	<div class="docs-attr-desc"><p><span class="text-muted">No docs</span></p>
</div>
	<br>

        
        
    
    
	<p class="docs-attr-name">
        <a name="validate_bearer_token" href="#validate_bearer_token" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>validate_bearer_token</b>
        <i class="text-muted">(self, token, scopes, request)</i>
    </p>
	<div class="docs-attr-desc"><p><span class="text-muted">No docs</span></p>
</div>
	<br>

        
        
    
    
	<p class="docs-attr-name">
        <a name="validate_client_id" href="#validate_client_id" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>validate_client_id</b>
        <i class="text-muted">(self, client_id, request)</i>
    </p>
	<div class="docs-attr-desc"><p><span class="text-muted">No docs</span></p>
</div>
	<br>

        
        
    
    
	<p class="docs-attr-name">
        <a name="validate_code" href="#validate_code" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>validate_code</b>
        <i class="text-muted">(self, client_id, code, client, request)</i>
    </p>
	<div class="docs-attr-desc"><p><span class="text-muted">No docs</span></p>
</div>
	<br>

        
        
    
    
	<p class="docs-attr-name">
        <a name="validate_grant_type" href="#validate_grant_type" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>validate_grant_type</b>
        <i class="text-muted">(self, client_id, grant_type, client, request)</i>
    </p>
	<div class="docs-attr-desc"><p><span class="text-muted">No docs</span></p>
</div>
	<br>

        
        
    
    
	<p class="docs-attr-name">
        <a name="validate_redirect_uri" href="#validate_redirect_uri" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>validate_redirect_uri</b>
        <i class="text-muted">(self, client_id, redirect_uri, request)</i>
    </p>
	<div class="docs-attr-desc"><p><span class="text-muted">No docs</span></p>
</div>
	<br>

        
        
    
    
	<p class="docs-attr-name">
        <a name="validate_refresh_token" href="#validate_refresh_token" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>validate_refresh_token</b>
        <i class="text-muted">(self, refresh_token, client, request)</i>
    </p>
	<div class="docs-attr-desc"><p><span class="text-muted">No docs</span></p>
</div>
	<br>

        
        
    
    
	<p class="docs-attr-name">
        <a name="validate_response_type" href="#validate_response_type" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>validate_response_type</b>
        <i class="text-muted">(self, client_id, response_type, client, request)</i>
    </p>
	<div class="docs-attr-desc"><p><span class="text-muted">No docs</span></p>
</div>
	<br>

        
        
    
    
	<p class="docs-attr-name">
        <a name="validate_scopes" href="#validate_scopes" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>validate_scopes</b>
        <i class="text-muted">(self, client_id, scopes, client, request)</i>
    </p>
	<div class="docs-attr-desc"><p><span class="text-muted">No docs</span></p>
</div>
	<br>

        
        
    
    
	<p class="docs-attr-name">
        <a name="validate_silent_authorization" href="#validate_silent_authorization" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>validate_silent_authorization</b>
        <i class="text-muted">(self, request)</i>
    </p>
	<div class="docs-attr-desc"><p>Ensure the logged in user has authorized silent OpenID authorization.</p>

<pre><code>    Silent OpenID authorization allows access tokens and id tokens to be
    granted to clients without any user prompt or interaction.
</code></pre>

<p><strong>Parameters:</strong></p>

<ul>
<li><p><strong><code>request</code></strong> -  The HTTP Request (oauthlib.common.Request)</p>

<pre><code>:rtype: True or False

Method is used by:
    - OpenIDConnectAuthCode
    - OpenIDConnectImplicit
    - OpenIDConnectHybrid
</code></pre></li>
</ul>
</div>
	<br>

        
        
    
    
	<p class="docs-attr-name">
        <a name="validate_silent_login" href="#validate_silent_login" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>validate_silent_login</b>
        <i class="text-muted">(self, request)</i>
    </p>
	<div class="docs-attr-desc"><p>Ensure session user has authorized silent OpenID login.</p>

<pre><code>    If no user is logged in or has not authorized silent login, this
    method should return False.

    If the user is logged in but associated with multiple accounts and
    not selected which one to link to the token then this method should
    raise an oauthlib.oauth2.AccountSelectionRequired error.
</code></pre>

<p><strong>Parameters:</strong></p>

<ul>
<li><p><strong><code>request</code></strong> -  The HTTP Request (oauthlib.common.Request)</p>

<pre><code>:rtype: True or False

Method is used by:
    - OpenIDConnectAuthCode
    - OpenIDConnectImplicit
    - OpenIDConnectHybrid
</code></pre></li>
</ul>
</div>
	<br>

        
        
    
    
	<p class="docs-attr-name">
        <a name="validate_user_match" href="#validate_user_match" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>validate_user_match</b>
        <i class="text-muted">(self, id_token_hint, scopes, claims, request)</i>
    </p>
	<div class="docs-attr-desc"><p>Ensure client supplied user id hint matches session user.</p>

<pre><code>    If the sub claim or id_token_hint is supplied then the session
    user must match the given ID.
</code></pre>

<p><strong>Parameters:</strong></p>

<ul>
<li><strong><code>id_token_hint</code></strong> -  User identifier string.</li>
<li><strong><code>scopes</code></strong> -  List of OAuth 2 scopes and OpenID claims (strings).</li>
<li><strong><code>claims</code></strong> -  OpenID Connect claims dict.</li>
<li><p><strong><code>request</code></strong> -  The HTTP Request (oauthlib.common.Request)</p>

<pre><code>:rtype: True or False

Method is used by:
    - OpenIDConnectAuthCode
    - OpenIDConnectImplicit
    - OpenIDConnectHybrid
</code></pre></li>
</ul>
</div>
	<br>

        
    </div>
    <hr>

	

	
        
	<h3 style="font-weight: normal;">Class <b>WebApplicationServer</b></h3>
    
    <p style="padding-left: 30px;"><i>Inherits from oauthlib.oauth2.rfc6749.endpoints.authorization.AuthorizationEndpoint, oauthlib.oauth2.rfc6749.endpoints.token.TokenEndpoint, oauthlib.oauth2.rfc6749.endpoints.resource.ResourceEndpoint, oauthlib.oauth2.rfc6749.endpoints.revocation.RevocationEndpoint</i></h4>
    
    <div class="docs-attr-desc"><p>An all-in-one endpoint featuring Authorization code grant and Bearer tokens.</p>
</div>
    <div style="padding-left: 30px;">
        
        
    
    
	<p class="docs-attr-name">
        <a name="__init__" href="#__init__" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		<b>__init__</b>
        <i class="text-muted">(self, request_validator, token_generator=None, token_expires_in=None, refresh_token_generator=None)</i>
    </p>
	<div class="docs-attr-desc"><p>Construct a new web application server.</p>

<p><strong>Parameters:</strong></p>

<ul>
<li><p><strong><code>request_validator</code></strong> -  An implementation of</p>

<pre><code>                          oauthlib.oauth2.RequestValidator.
</code></pre></li>
</ul>

<p><strong>Parameters:</strong></p>

<ul>
<li><p><strong><code>token_expires_in</code></strong> -  An int or a function to generate a token</p>

<pre><code>                         expiration offset (in seconds) given a
                         oauthlib.common.Request object.
</code></pre></li>
</ul>

<p><strong>Parameters:</strong></p>

<ul>
<li><strong><code>token_generator</code></strong> -  A function to generate a token from a request.</li>
<li><p><strong><code>refresh_token_generator</code></strong> -  A function to generate a token from a</p>

<pre><code>                                request for the refresh token.
</code></pre></li>
</ul>

<p><strong>Parameters:</strong></p>

<ul>
<li><p><strong><code>kwargs</code></strong> -  Extra parameters to pass to authorization-,</p>

<pre><code>               token-, resource-, and revocation-endpoint constructors.
</code></pre></li>
</ul>
</div>
	<br>

        
    </div>
    <hr>

	

	
        
    
    
	<p class="docs-attr-name">
        <a name="frappe.oauth.calculate_at_hash" href="#frappe.oauth.calculate_at_hash" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		frappe.oauth.<b>calculate_at_hash</b>
        <i class="text-muted">(access_token, hash_alg)</i>
    </p>
	<div class="docs-attr-desc"><p>Helper method for calculating an access token
    hash, as described in <a href="http://openid.net/specs/openid-connect-core-1">http://openid.net/specs/openid-connect-core-1</a><em>0.html#CodeIDToken
    Its value is the base64url encoding of the left-most half of the hash of the octets
    of the ASCII representation of the access</em>token value, where the hash algorithm
    used is the hash algorithm used in the alg Header Parameter of the ID Token's JOSE
    Header. For instance, if the alg is RS256, hash the access<em>token value with SHA-256,
    then take the left-most 128 bits and base64url encode them. The at</em>hash value is a
    case sensitive string.
    Args:
        access<em>token (str): An access token string.
        hash</em>alg (callable): A callable returning a hash object, e.g. hashlib.sha256</p>
</div>
	<br>

	

	
        
    
    
	<p class="docs-attr-name">
        <a name="frappe.oauth.delete_oauth2_data" href="#frappe.oauth.delete_oauth2_data" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		frappe.oauth.<b>delete_oauth2_data</b>
        <i class="text-muted">()</i>
    </p>
	<div class="docs-attr-desc"><p><span class="text-muted">No docs</span></p>
</div>
	<br>

	

	
        
    
    
	<p class="docs-attr-name">
        <a name="frappe.oauth.get_cookie_dict_from_headers" href="#frappe.oauth.get_cookie_dict_from_headers" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		frappe.oauth.<b>get_cookie_dict_from_headers</b>
        <i class="text-muted">(r)</i>
    </p>
	<div class="docs-attr-desc"><p><span class="text-muted">No docs</span></p>
</div>
	<br>

	

	
        
    
    
	<p class="docs-attr-name">
        <a name="frappe.oauth.get_url_delimiter" href="#frappe.oauth.get_url_delimiter" class="text-muted small">
            <i class="fa fa-link small" style="color: #ccc;"></i></a>
		frappe.oauth.<b>get_url_delimiter</b>
        <i class="text-muted">(separator_character= )</i>
    </p>
	<div class="docs-attr-desc"><p><span class="text-muted">No docs</span></p>
</div>
	<br>

	



<!-- autodoc -->